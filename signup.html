<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AKHEEL · signup</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // IMPORTANT: Replace with your full anon key if needed
    const SUPABASE_URL = 'https://pwvyxhtlmozfeqorlnib.supabase.co';
    const SUPABASE_ANON_KEY = 'sb_publishable_YsCixepPw0lGeBEq7R902g_TeA'; // use your full key
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  </script>
  <script src="cart.js"></script>
  
  <style>
    * { margin:0; padding:0; box-sizing:border-box; image-rendering:pixelated; }
    body {
      background:#faf8f5; font-family:'VT323',monospace; color:#1e1e1e; font-size:1.4rem;
      border:8px solid #1e1e1e; min-height:100vh; margin:1rem; padding:1.5rem;
    }
    h1,h2,h3 { font-family:'Press Start 2P',cursive; margin-bottom:1.5rem; text-transform:uppercase; }
    h1 { font-size:2.2rem; } h2 { font-size:1.6rem; margin-top:2rem; }
    nav {
      display:flex; flex-wrap:wrap; gap:1.2rem; margin-bottom:3rem;
      border-bottom:4px solid #1e1e1e; padding-bottom:1.5rem; align-items:center;
    }
    .nav-link {
      background:#fff; border:4px solid #1e1e1e; font-family:'Press Start 2P',cursive;
      font-size:0.8rem; padding:0.8rem 1.2rem; cursor:pointer; box-shadow:4px 4px 0 #1e1e1e;
      text-decoration:none; color:#1e1e1e; transition:all 0.05s linear;
    }
    .nav-link:hover, .nav-link.active { background:#1e1e1e; color:#fff; transform:translate(4px,4px); box-shadow:none; }
    .nav-link.active { pointer-events:none; }
    .container { max-width:1300px; margin:0 auto; }
    footer { margin-top:4rem; border-top:4px solid #1e1e1e; padding-top:1.5rem; text-align:center; }
    
    .auth-form {
      max-width:400px; margin:2rem auto; padding:2rem; border:4px solid #1e1e1e;
      background:#fff; box-shadow:8px 8px 0 #1e1e1e;
    }
    .auth-form label {
      font-family:'Press Start 2P',cursive; font-size:0.8rem; display:block; margin-bottom:0.5rem; margin-top:1rem;
    }
    .auth-form input {
      width:100%; background:#1e1e1e; color:#fff; border:4px solid #1e1e1e; padding:0.8rem;
      font-family:'VT323',monospace; font-size:1.2rem; box-shadow:4px 4px 0 #1e1e1e; outline:none;
    }
    .auth-form input:focus { background:#2e2e2e; border-color:#fff; }
    .auth-form button {
      width:100%; margin-top:2rem; background:#1e1e1e; color:#fff; border:4px solid #1e1e1e;
      font-family:'Press Start 2P',cursive; font-size:0.9rem; padding:1rem; cursor:pointer;
      box-shadow:4px 4px 0 #1e1e1e; transition:all 0.05s linear;
    }
    .auth-form button:hover { background:#fff; color:#1e1e1e; transform:translate(4px,4px); box-shadow:none; }
    .error-message { color:red; font-size:1rem; margin-bottom:1rem; text-align:center; font-family:'Press Start 2P',cursive; }
    .auth-links { margin-top:1.5rem; text-align:center; font-size:1rem; }
    .auth-links a { color:#1e1e1e; text-decoration:underline; text-underline-offset:4px; }
    #user-greeting { font-family:'Press Start 2P',cursive; font-size:0.7rem; color:#1e1e1e; margin-right:1rem; }
  </style>
</head>
<body>
  <div class="container">
    <header><h1># AKHEEL.</h1></header>
    <nav>
      <a href="index.html" class="nav-link">HOME</a>
      <a href="timeline.html" class="nav-link">TIMELINE</a>
      <a href="projects.html" class="nav-link">PROJECTS</a>
      <a href="products.html" class="nav-link">PRODUCTS</a>
      <a href="cart.html" class="nav-link">CART</a>
      <a href="about.html" class="nav-link">ABOUT</a>
      <div style="margin-left:auto; display:flex; gap:1rem; align-items:center;">
        <span id="user-greeting"></span>
        <a href="login.html" class="nav-link" id="login-link">LOGIN</a>
        <a href="#" class="nav-link" id="logout-link" style="display:none;" onclick="logout()">LOGOUT</a>
      </div>
    </nav>
    <main>
      <div class="auth-form">
        <h2>sign up</h2>
        <div id="error" class="error-message"></div>
        <label for="email">email</label>
        <input type="email" id="email" required>
        <label for="password">password</label>
        <input type="password" id="password" required>
        <label for="fullname">full name (optional)</label>
        <input type="text" id="fullname">
        <button onclick="handleSignup()">create account</button>
        <div class="auth-links">Already have an account? <a href="login.html">login</a></div>
      </div>
    </main>
    <footer><p>© 2025 AKHEEL. – retro signup</p></footer>
  </div>

  <script>
    async function handleSignup() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const fullname = document.getElementById('fullname').value;
      const errorDiv = document.getElementById('error');

      const { data, error } = await supabase.auth.signUp({
        email: email,
        password: password,
        options: { data: { full_name: fullname } }
      });

      if (error) {
        errorDiv.innerText = error.message;
      } else {
        alert('Account created! Please log in.');
        window.location.href = 'login.html';
      }
    }

    supabase.auth.onAuthStateChange((event, session) => {
      const greeting = document.getElementById('user-greeting');
      const loginLink = document.getElementById('login-link');
      const logoutLink = document.getElementById('logout-link');
      if (session) {
        greeting.innerText = `Hi, ${session.user.email}`;
        loginLink.style.display = 'none';
        logoutLink.style.display = 'inline-block';
      } else {
        greeting.innerText = '';
        loginLink.style.display = 'inline-block';
        logoutLink.style.display = 'none';
      }
    });

    window.logout = async function() {
      await supabase.auth.signOut();
      location.reload();
    };
  </script>
</body>
</html>
